(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{438:function(t,a,s){t.exports=s.p+"assets/img/grafana02.0cc23744.png"},439:function(t,a,s){t.exports=s.p+"assets/img/grafana01.9fcdc30e.png"},440:function(t,a,s){t.exports=s.p+"assets/img/grafana03.a2276295.png"},618:function(t,a,s){"use strict";s.r(a);var e=s(3),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"}),a("p",[t._v("Grafana是一个跨平台的开源的度量分析和可视化工具，可以通过将采集的数据查询然后可视化的展示，并及时通知。结合插件，可以快速灵活的展示数据，支持多数据源，混合展示，通知报警等特点。")])]),t._v(" "),a("h2",{attrs:{id:"安装启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装启动"}},[t._v("#")]),t._v(" 安装启动")]),t._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"https://grafana.com/grafana/download",target:"_blank",rel:"noopener noreferrer"}},[t._v("下载安装"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://grafana.com/docs/grafana/latest/installation/rpm/",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方文档"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[t._v("yum，apt等方式安装，直接"),a("code",[t._v("sudo service grafana-server start")]),t._v("启动")])]),t._v(" "),a("li",[a("p",[t._v("压缩包安装，添加"),a("code",[t._v("安装目录/bin")]),t._v("进环境变量，以配置文件方式启动，默认端口3000")]),t._v(" "),a("p",[a("code",[t._v('nohup grafana-server -homepath="/opt/app/lab/grafana-6.3.2" &')])])])]),t._v(" "),a("h2",{attrs:{id:"使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[t._v("#")]),t._v(" 使用")]),t._v(" "),a("p",[a("strong",[t._v("特点：")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("展示方式：快速灵活的客户端图表，面板插件有许多不同方式的可视化指标和日志，官方库中具有丰富的仪表盘插件，比如热图、折线图、图表等多种展示方式；")])]),t._v(" "),a("li",[a("p",[t._v("数据源：Graphite，InfluxDB，OpenTSDB，Prometheus，Elasticsearch，CloudWatch和KairosDB等；")])]),t._v(" "),a("li",[a("p",[t._v("通知提醒：以可视方式定义最重要指标的警报规则，Grafana将不断计算并发送通知，在数据达到阈值时通过Slack、PagerDuty等获得通知；")])]),t._v(" "),a("li",[a("p",[t._v("混合展示：在同一图表中混合使用不同的数据源，可以基于每个查询指定数据源，甚至自定义数据源；")])]),t._v(" "),a("li",[a("p",[t._v("注释：使用来自不同数据源的丰富事件注释图表，将鼠标悬停在事件上会显示完整的事件元数据和标记；")])]),t._v(" "),a("li",[a("p",[t._v("过滤器：Ad-hoc过滤器允许动态创建新的键/值过滤器，这些过滤器会自动应用于使用该数据源的所有查询。")])])]),t._v(" "),a("p",[a("strong",[t._v("简单使用：")])]),t._v(" "),a("ul",[a("li",[t._v("启动服务，浏览器登陆，默认"),a("code",[t._v("localhost:3000")]),t._v("，端口配置可改，默认用户名密码"),a("code",[t._v("admin")]),t._v("；")])]),t._v(" "),a("h2",{attrs:{id:"grafana-inflexdb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#grafana-inflexdb"}},[t._v("#")]),t._v(" grafana+inflexDB")]),t._v(" "),a("p",[t._v("在设置中，添加数据源，选择数据库，进行基本的配置即可，")]),t._v(" "),a("p",[a("img",{attrs:{src:s(438),alt:"image-20200822190425269"}})]),t._v(" "),a("h4",{attrs:{id:"dashboard-面板配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dashboard-面板配置"}},[t._v("#")]),t._v(" Dashboard（面板配置）")]),t._v(" "),a("p",[a("img",{attrs:{src:s(439),alt:"image-20200822190144381"}})]),t._v(" "),a("h4",{attrs:{id:"主要配置项说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#主要配置项说明"}},[t._v("#")]),t._v(" 主要配置项说明")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("配置项")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("的说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("DataSource")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("选择Grafana已配置的数据源")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("FROM-Default")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("默认Schema，保持不变即可")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("FROM-measurement")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("对应的InfluxDB的表名")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("WHERE")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("WHERE条件，根据自己需求选择")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("SELECT-Field")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("对应选的字段，可根据需求增减")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("SELECT-mean()")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("选择的字段对应的InfluxDB的函数")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("GroupBY-time()")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("根据时间分组")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("GROUPBY-fill()")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("当不存在数据时，以null为默认值填充")])])])]),t._v(" "),a("p",[t._v("也可以直接点击后侧的编辑按钮，编写SQL语句即可")]),t._v(" "),a("p",[t._v("往数据库插入数据即可看到变化")]),t._v(" "),a("p",[a("img",{attrs:{src:s(440),alt:"image-20200822190659534"}})]),t._v(" "),a("h2",{attrs:{id:"密码修改"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#密码修改"}},[t._v("#")]),t._v(" 密码修改")]),t._v(" "),a("p",[t._v("通过"),a("code",[t._v("shell")]),t._v("指令全局找"),a("code",[t._v("grafana.db")]),t._v("的位置，然后使用"),a("code",[t._v("sqlites")]),t._v(" 修改密码，"),a("code",[t._v("sqlites")]),t._v("命令无法使用的话，根据提示先安装")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 找grafana.db文件位置")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),t._v(" / "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-name")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"grafana.db"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看数据库中包含的表")]),t._v("\n.tables\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查询用户表")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" * from user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重置admin用户的默认密码为admin")]),t._v("\nupdate user "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" password "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'59acf18b94d7eb0694c61e60ce44c110c7a683ac6a8f09580d626f90f4a242000746579358d77dd9e570e83fa24faa88a8a6'")]),t._v(", salt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'F3FAxVm33R'")]),t._v(" where login "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'admin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#退出sqlite3")]),t._v("\n.exit\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);