(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{618:function(s,a,t){"use strict";t.r(a);var e=t(4),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"title"})]),t("h1",{attrs:{id:"包的知识点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#包的知识点"}},[s._v("#")]),s._v(" 包的知识点")]),s._v(" "),t("ul",[t("li",[s._v("导包可以多行导入")])]),s._v(" "),t("div",{staticClass:"language-go line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fmt"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sync"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ul",[t("li",[s._v("可以使用别名，避免同一包名产生冲突")])]),s._v(" "),t("div",{staticClass:"language-go line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" mrand "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"math/rand"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("使用点")])]),s._v(" "),t("p",[s._v("但这种用法，会有一定的隐患，就是导入的包里可能有函数，会和我们自己的函数发生冲突")]),s._v(" "),t("div",{staticClass:"language-go line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fmt"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("func")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("Println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello, world"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("ul",[t("li",[s._v("包的初始化"),t("code",[s._v("init")])])]),s._v(" "),t("p",[s._v("包被导入时，会执行"),t("code",[s._v("init")]),s._v("函数，优先于"),t("code",[s._v("main")]),s._v("函数，不能有参数和返回值，"),t("strong",[s._v("建议少用，仅用于全局变量初始化，或者单元测试初始化一些东西")])]),s._v(" "),t("ul",[t("li",[s._v("包的匿名导入")])]),s._v(" "),t("p",[s._v("导入一个没有用到的包在编译的时候会报错，如果只想使用"),t("code",[s._v("init")]),s._v("函数来初始化一些任务，可以对包进行匿名导入")]),s._v(" "),t("div",{staticClass:"language-go line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("_")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"packgename"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[t("p",[s._v("导入的包是路径")])]),s._v(" "),t("li",[t("p",[s._v("使用绝对路径导入，而不是相对路径，避免改变了项目放在"),t("code",[s._v("src")]),s._v("下，改变了"),t("code",[s._v("GOPATH")]),s._v("而导致运行报错")])]),s._v(" "),t("li",[t("p",[s._v("包导入的路径的优先级")])])]),s._v(" "),t("p",[s._v("如果项目下有"),t("code",[s._v("vendor")]),s._v("目录，那么优先级是"),t("code",[s._v("vender > $GOROOT/src > $GOPATH/src")])]),s._v(" "),t("p",[s._v("通常"),t("code",[s._v("vendor")]),s._v(" 目录是通过 "),t("code",[s._v("go mod vendor")]),s._v(" 命令生成的，这个命令会将项目依赖全部打包到你的项目目录下的 verdor 文件夹中")]),s._v(" "),t("h1",{attrs:{id:"go-modules"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#go-modules"}},[s._v("#")]),s._v(" Go Modules")]),s._v(" "),t("p",[s._v("go的包管理方式，从"),t("code",[s._v("GOPATH")]),s._v("到"),t("code",[s._v("GO VENDOR")]),s._v("到"),t("code",[s._v("GO MODULES")]),s._v("，推荐使用"),t("code",[s._v("Go Modules")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("GOPATH")]),s._v(" "),t("p",[s._v("可以理解为工作目录，通常的目录结构如下，主要弊端无法在项目中使用指定版本的包，因为其没有包的概念，一个包只能保留一个版本")])])]),s._v(" "),t("div",{staticClass:"language-go line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("_bin：存放编译后生成的二进制可执行文件\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("_pkg：存放编译后生成的 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("a 文件\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("_src：存放项目的源代码，可以是你自己写的代码，也可以是你 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v(" get 下载的包\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[t("p",[s._v("go vender")]),s._v(" "),t("p",[s._v("为了解决 GOPATH 方案下不同项目下无法使用多个版本库的问题，Go v1.5 开始支持 vendor")]),s._v(" "),t("p",[s._v("它在每个项目的下都创建一个"),t("code",[s._v("vendor")]),s._v("目录，每个项目需要的以来都下载到该目录下，项目之间不相互影响，但是项目同一个包极大可能被多个项目用到了，每个项目下都保留无疑是对磁盘空间的浪费，别人要使用你的项目，你还得想你依赖的包都上传，否则别人很可能无法使用】")])]),s._v(" "),t("li",[t("p",[s._v("go mod")]),s._v(" "),t("p",[s._v("go v1.11版本开始，"),t("code",[s._v("go env")]),s._v("多了个环境变量"),t("code",[s._v("GO111MODULE")]),s._v("，通过它可以开启或关闭 go mod 模式，它有三个可选值："),t("code",[s._v("off")]),s._v("、"),t("code",[s._v("on")]),s._v("、"),t("code",[s._v("auto")]),s._v("，默认值是"),t("code",[s._v("auto")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("GO111MODULE=off")]),s._v("禁用模块支持，编译时会从"),t("code",[s._v("GOPATH")]),s._v("和"),t("code",[s._v("vendor")]),s._v("文件夹中查找包")]),s._v(" "),t("li",[t("code",[s._v("GO111MODULE=on")]),s._v("启用模块支持，编译时会忽略"),t("code",[s._v("GOPATH")]),s._v("和"),t("code",[s._v("vendor")]),s._v("文件夹，只根据 "),t("code",[s._v("go.mod")]),s._v("下载依赖")]),s._v(" "),t("li",[t("code",[s._v("GO111MODULE=auto")]),s._v("，当项目在"),t("code",[s._v("$GOPATH/src")]),s._v("外且项目根目录有"),t("code",[s._v("go.mod")]),s._v("文件时，自动开启模块支持")])])])]),s._v(" "),t("div",{staticClass:"language-go line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 开启方式")]),s._v("\n$ "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("go")]),s._v(" env "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("w GO111MODULE"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"on"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);