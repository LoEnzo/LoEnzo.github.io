(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{675:function(t,s,a){"use strict";a.r(s);var e=a(3),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"title"}),s("p",[t._v("Helm是Kubernetes的包管理工具，如果比作操作系统，那么Helm就好比yum，apt-get，homebrew。使用Helm chart可以方便我们部署和管理自己的应用。Helm 安装 charts 到 Kubernetes 集群中，每次安装都会创建一个新的 release。Helm 本质就是让 K8s 的应用管理（Deployment,Service 等 ) 可配置，能动态生成。通过动态生成 K8s 资源清 单文件（deployment.yaml，service.yaml）。然后调用 Kubectl 自动执行 K8s 资源部署。")])]),t._v(" "),s("h1",{attrs:{id:"下载安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载安装"}},[t._v("#")]),t._v(" 下载安装")]),t._v(" "),s("p",[s("strong",[t._v("文档地址")])]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/helm/helm/releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("github_release"),s("OutboundLink")],1),t._v("，直接下载，当前使用"),s("a",{attrs:{href:"https://get.helm.sh/helm-v3.9.0-linux-amd64.tar.gz",target:"_blank",rel:"noopener noreferrer"}},[t._v("v3.9.0"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://helm.sh/zh/docs/",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方文档"),s("OutboundLink")],1)])]),t._v(" "),s("p",[s("strong",[t._v("版本参考")])]),t._v(" "),s("p",[t._v("::: detail Helm和对应支持的Kubernetes版本")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("Helm 版本")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("支持的 Kubernetes 版本")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("3.7.x")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("1.22.x - 1.19.x")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("3.6.x")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("1.21.x - 1.18.x")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("3.5.x")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("1.20.x - 1.17.x")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("3.4.x")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("1.19.x - 1.16.x")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("3.3.x")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("1.18.x - 1.15.x")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("3.2.x")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("1.18.x - 1.15.x")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("3.1.x")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("1.17.x - 1.14.x")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("3.0.x")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("1.16.x - 1.13.x")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("2.16.x")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("1.16.x - 1.15.x")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("2.15.x")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("1.15.x - 1.14.x")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("2.14.x")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("1.14.x - 1.13.x")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("2.13.x")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("1.13.x - 1.12.x")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("2.12.x")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("1.12.x - 1.11.x")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("2.11.x")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("1.11.x - 1.10.x")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("2.10.x")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("1.10.x - 1.9.x")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("2.9.x")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("1.10.x - 1.9.x")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("2.8.x")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("1.9.x - 1.8.x")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("2.7.x")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("1.8.x - 1.7.x")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("2.6.x")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("1.7.x - 1.6.x")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("2.5.x")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("1.6.x - 1.5.x")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("2.4.x")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("1.6.x - 1.5.x")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("2.3.x")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("1.5.x - 1.4.x")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("2.2.x")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("1.5.x - 1.4.x")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("2.1.x")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("1.5.x - 1.4.x")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("2.0.x")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("1.4.x - 1.3.x")])])])]),t._v(" "),s("p",[t._v(":::")]),t._v(" "),s("p",[s("strong",[t._v("安装")])]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-zxvf")]),t._v(" harbor-offline-installer-v3.9.0.tgz\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mv")]),t._v(" linux-amd64/helm /usr/local/bin/helm\n\nhelm version\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 有返回即安装成功")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("h1",{attrs:{id:"基本使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本使用"}},[t._v("#")]),t._v(" 基本使用")]),t._v(" "),s("h3",{attrs:{id:"添加仓库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加仓库"}},[t._v("#")]),t._v(" 添加仓库")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("helm repo "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" bitnami https://charts.bitnami.com/bitnami\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加私有harbor仓库")]),t._v("\nhelm repo "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" harbor http://harbor.xxx.com/chartrepo/xxx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--username")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("admin "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--password")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("Harbor12345\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 私有harbor仓库默认没有helm chart，重新安装harbor后，直接刷新即可，harbor安装查看其他文档,安装完成后即可看到 helm chart，可以在线上传，也可以")]),t._v("\n./install.sh  --with-chartmuseum`\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("h2",{attrs:{id:"helm-push-插件安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#helm-push-插件安装"}},[t._v("#")]),t._v(" helm push 插件安装")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("在线安装："),s("code",[t._v("helm plugin install https://github.com/chartmuseum/helm-push")])])]),t._v(" "),s("li",[s("p",[t._v("离线安装： 下载最新release，当前使用 "),s("a",{attrs:{href:"https://github.com/chartmuseum/helm-push",target:"_blank",rel:"noopener noreferrer"}},[t._v("0.10.2"),s("OutboundLink")],1)])])]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ helm "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("env")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("HELM_BIN")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"helm"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("HELM_DEBUG")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"false"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("HELM_KUBEAPISERVER")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("HELM_KUBECONTEXT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("HELM_KUBETOKEN")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("HELM_NAMESPACE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"default"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("HELM_PLUGINS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/root/.local/share/helm/plugins"')]),t._v("\t\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 注意下面这行是插件所在位置")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("HELM_REGISTRY_CONFIG")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/root/.config/helm/registry.json"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("HELM_REPOSITORY_CACHE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/root/.cache/helm/repository"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("HELM_REPOSITORY_CONFIG")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/root/.config/helm/repositories.yaml"')]),t._v("\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加仓库后保存的所有仓库相关配置的记录文件")]),t._v("\n\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" /root/.local/share/helm/plugins/helm-push\n\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" helm-push_0.10.2_linux_amd64.tar.gz /root/.local/share/helm/plugins/helm-push\n\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-zxvf")]),t._v(" /root/.local/share/helm/plugins/helm-push/helm-push_0.10.2_linux_amd64.tar.gz \n\n$ helm plugin list\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@master1 nginx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# helm plugin list")]),t._v("\nNAME\tVERSION\tDESCRIPTION                      \npush\t"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.10")]),t._v(".2  \tPush\t chart package to ChartMuseum\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br")])]),s("h2",{attrs:{id:"helm-push-使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#helm-push-使用"}},[t._v("#")]),t._v(" helm push 使用")]),t._v(" "),s("p",[t._v("V3.8.0版本后启动了OCI注册中心，"),s("a",{attrs:{href:"https://helm.sh/zh/docs/topics/registries/",target:"_blank",rel:"noopener noreferrer"}},[t._v("详细查看"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("直接执行 "),s("code",[t._v("helm push")]),t._v("报错如下 "),s("code",[t._v("helm push defaulting to oci://")]),t._v("，对应 "),s("a",{attrs:{href:"https://github.com/chartmuseum/helm-push/pull/110",target:"_blank",rel:"noopener noreferrer"}},[t._v("issue"),s("OutboundLink")],1),t._v(" 参考，好像是本地要启动一个注册中心，因为我采用的k8s最新的不是使用docker，就没弄，我发现使用 "),s("code",[t._v("helm cm-push")]),t._v("可以直接推送成功，就未做尝试")]),t._v(" "),s("p",[t._v("感觉启动一个注册中心，"),s("code",[t._v("helm push")]),t._v("就会推送到本地仓库，仅猜测，待后续验证")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# helme cm-push 待推送chart 仓库名")]),t._v("\nhelm cm-push nginx-0.1.1.tgz harbor\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 推送压缩包")]),t._v("\nhelm cm-push nginx-0.1.1/ harbor\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 推送文件夹")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("h1",{attrs:{id:"其他指令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#其他指令"}},[t._v("#")]),t._v(" 其他指令")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/twingao/article/details/104282223",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考"),s("OutboundLink")],1)]),t._v(" "),s("h4",{attrs:{id:"helm-repo-list"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#helm-repo-list"}},[t._v("#")]),t._v(" helm repo list")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("NAME            URL                                            \nhelm-hosted     http://nexushost.xxx.x/repository/helm-hosted/\nharbor          http://harbor.xxx.com/chartrepo/xxx        \n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("h3",{attrs:{id:"helm-search-repo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#helm-search-repo"}},[t._v("#")]),t._v(" helm search repo")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ helm search repo nginx\nNAME                    CHART VERSION   APP VERSION     DESCRIPTION                \nharbor/nginx            "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.1")]),t._v(".0           "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.16")]),t._v(".0          A Helm chart "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" Kubernetes\nhelm-hosted/nginx       "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.1")]),t._v(".0           "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.16")]),t._v(".0          A Helm chart "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" Kubernetes\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("h3",{attrs:{id:"helm-install"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#helm-install"}},[t._v("#")]),t._v(" helm install")]),t._v(" "),s("p",[t._v("通过改指令可以直接使用chart模板自动渲染需要k8s部署的yaml文件，还可以带参数 -key=value 的形式镜像覆盖默认值")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 从远程harbor charts repo安装")]),t._v("\nhelm "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" nginx harbor/nginx "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# nginx 这是命名，必须的，要不然要自动产生名字--generate-name")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 从本地目录或压缩文件安装")]),t._v("\nhelm "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" nginx-0.1.0.tgz\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 执行安装返回参考")]),t._v("\nNAME: nginx\nLAST DEPLOYED: Tue Jul  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v(":10:50 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v("\nNAMESPACE: default\nSTATUS: deployed\nREVISION: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\nNOTES:\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(". Get the application URL by running these commands:\n  "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("POD_NAME")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),t._v("kubectl get pods "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--namespace")]),t._v(" default "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-l")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app.kubernetes.io/name=nginx,app.kubernetes.io/instance=nginx"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-o")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("jsonpath")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{.items[0].metadata.name}"')]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Visit http://127.0.0.1:8080 to use your application"')]),t._v("\n  kubectl "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--namespace")]),t._v(" default port-forward "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$POD_NAME")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),t._v(":80\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br")])]),s("h3",{attrs:{id:"helm-list"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#helm-list"}},[t._v("#")]),t._v(" helm list")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("NAME    NAMESPACE       REVISION        UPDATED                                 STATUS          CHART           APP VERSION\nnginx   default         "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("               "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2022")]),t._v("-07-05 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v(":10:50.607565199 +0800 CST deployed        nginx-0.1.0     "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.16")]),t._v(".0    \n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("h3",{attrs:{id:"helm-uninstall"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#helm-uninstall"}},[t._v("#")]),t._v(" helm uninstall")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ helm uninstall nginx\nrelease "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nginx"')]),t._v(" uninstalled\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果有namespace，也需要加上")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("h3",{attrs:{id:"helm-packge"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#helm-packge"}},[t._v("#")]),t._v(" helm packge")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ helm package hello-helm\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 基于自己写的chart打包")]),t._v("\nSuccessfully packaged chart and saved it to: /root/course/kubeadm/helm/hello-helm-0.1.0.tgz\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])])])}),[],!1,null,null,null);s.default=n.exports}}]);