(window.webpackJsonp=window.webpackJsonp||[]).push([[101],{648:function(t,n,s){"use strict";s.r(n);var a=s(3),e=Object(a.a)({},(function(){var t=this,n=t._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"title"}),n("p",[t._v("免费域名申请，"),n("a",{attrs:{href:"https://my.freenom.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("freenom"),n("OutboundLink")],1),t._v("，申请的域名是没有进行备案的，自带DNS解析速度较慢，搭配"),n("a",{attrs:{href:"https://www.dnspod.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("dnspod"),n("OutboundLink")],1),t._v("进行解析；")]),t._v(" "),n("p",[t._v("运用免费域名搭建 Valine Admin后台搭建，切换国际版，国际版的云引擎不需要域名备案")])]),t._v(" "),n("h3",{attrs:{id:"详细教程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#详细教程"}},[t._v("#")]),t._v(" "),n("strong",[n("a",{attrs:{href:"https://vuepress-theme-reco.recoluan.com/views/other/valine-admin.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("详细教程"),n("OutboundLink")],1)])]),t._v(" "),n("h4",{attrs:{id:"域名申请"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#域名申请"}},[t._v("#")]),t._v(" 域名申请：")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://my.freenom.com/",target:"_blank",rel:"noopener noreferrer"}},[n("strong",[t._v("freenom")]),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("可以用google账号直接登陆，邮箱确定不再赘述，"),n("code",[t._v("freenom")]),t._v(" 提供 "),n("code",[t._v("tk")]),t._v("、"),n("code",[t._v("ml")]),t._v("、"),n("code",[t._v("cf")]),t._v("、"),n("code",[t._v("ga")]),t._v("、"),n("code",[t._v("gq")]),t._v(" 五种后缀的免费域名；")]),t._v(" "),n("p",[t._v("检测可用性，然后添加订单，时间选择12个月，是免费的。")]),t._v(" "),n("p",[t._v("成功后，在"),n("code",[t._v("Service")]),t._v("下，"),n("code",[t._v("My Domain")]),t._v("进入管理；")]),t._v(" "),n("p",[t._v("可以看到你购买的免费域名都是"),n("strong",[t._v("激活")]),t._v("状态，点击后面的"),n("strong",[t._v("Manage Domain")]),t._v("可以设置域名解析和DNS服务器")]),t._v(" "),n("p",[t._v("点击"),n("code",[t._v("Management Tools")]),t._v("下"),n("code",[t._v("Nameservers")])]),t._v(" "),n("p",[t._v("添加"),n("code",[t._v("Nameserver")])]),t._v(" "),n("h4",{attrs:{id:"域名解析-配置别名"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#域名解析-配置别名"}},[t._v("#")]),t._v(" "),n("strong",[t._v("域名解析，配置别名")])]),t._v(" "),n("p",[n("code",[t._v("freenom")]),t._v("自带解析较差，改用"),n("a",{attrs:{href:"https://www.dnspod.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("dnspod"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("点击右上角控制台，邮箱账号注册，不再赘述；")]),t._v(" "),n("p",[t._v("进入后，点击左边目录，"),n("code",[t._v("DNS解析")]),t._v("->"),n("code",[t._v("我的域名")]),t._v("->"),n("code",[t._v("添加域名")])]),t._v(" "),n("p",[t._v("点击自己的域名，里面已经有的两条"),n("code",[t._v("NS")]),t._v("记录类型的的默认记录值，例如"),n("code",[t._v("f1g1ns1.dnspod.net")]),t._v(","),n("code",[t._v("f1g1ns2.dnspod.net.")])]),t._v(" "),n("p",[t._v("将这两条地址添加到"),n("code",[t._v("freenom")]),t._v(" 的"),n("code",[t._v("Nameserver")]),t._v("中，返回dnspod刷新即可")]),t._v(" "),n("p",[n("strong",[t._v("Valine Admin 后台评论管理 自定义域名配置")])]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("主机记录")]),t._v(" "),n("th",[t._v("默认类型")]),t._v(" "),n("th",[t._v("线路类型")]),t._v(" "),n("th",[t._v("记录值")]),t._v(" "),n("th",[t._v("TTL")]),t._v(" "),n("th",[t._v("备注")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("@")]),t._v(" "),n("td",[t._v("CNAME")]),t._v(" "),n("td",[t._v("默认")]),t._v(" "),n("td",[t._v("j1uq1gtv.us-w1-cname.avosapps.us.")]),t._v(" "),n("td",[t._v("600")]),t._v(" "),n("td",[t._v("对应cname")])]),t._v(" "),n("tr",[n("td",[t._v("@")]),t._v(" "),n("td",[t._v("NS")]),t._v(" "),n("td",[t._v("默认")]),t._v(" "),n("td",[t._v("f1g1ns1.dnspod.net.")]),t._v(" "),n("td",[t._v("86400")]),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",[t._v("@")]),t._v(" "),n("td",[t._v("NS")]),t._v(" "),n("td",[t._v("默认")]),t._v(" "),n("td",[t._v("f1g1ns2.dnspod.net.")]),t._v(" "),n("td",[t._v("86400")]),t._v(" "),n("td")])])]),t._v(" "),n("p",[n("strong",[t._v("github page 自定义域名配置")])]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("主机记录")]),t._v(" "),n("th",[t._v("默认类型")]),t._v(" "),n("th",[t._v("线路类型")]),t._v(" "),n("th",[t._v("记录值")]),t._v(" "),n("th",[t._v("TTL")]),t._v(" "),n("th",[t._v("备注")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("@")]),t._v(" "),n("td",[t._v("www")]),t._v(" "),n("td",[t._v("默认")]),t._v(" "),n("td",[t._v("loenzo.github.io.")]),t._v(" "),n("td",[t._v("600")]),t._v(" "),n("td",[t._v("github page对应域名地址")])]),t._v(" "),n("tr",[n("td",[t._v("@")]),t._v(" "),n("td",[t._v("NS")]),t._v(" "),n("td",[t._v("默认")]),t._v(" "),n("td",[t._v("f1g1ns1.dnspod.net.")]),t._v(" "),n("td",[t._v("86400")]),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",[t._v("@")]),t._v(" "),n("td",[t._v("NS")]),t._v(" "),n("td",[t._v("默认")]),t._v(" "),n("td",[t._v("f1g1ns2.dnspod.net.")]),t._v(" "),n("td",[t._v("86400")]),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",[t._v("@")]),t._v(" "),n("td",[t._v("A")]),t._v(" "),n("td",[t._v("默认")]),t._v(" "),n("td",[t._v("185.199.108.153")]),t._v(" "),n("td",[t._v("600")]),t._v(" "),n("td",[t._v("github.io对应的ip地址")])]),t._v(" "),n("tr",[n("td",[t._v("@")]),t._v(" "),n("td",[t._v("A")]),t._v(" "),n("td",[t._v("默认")]),t._v(" "),n("td",[t._v("185.199.109.153")]),t._v(" "),n("td",[t._v("600")]),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",[t._v("@")]),t._v(" "),n("td",[t._v("A")]),t._v(" "),n("td",[t._v("默认")]),t._v(" "),n("td",[t._v("185.199.110.153")]),t._v(" "),n("td",[t._v("600")]),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",[t._v("@")]),t._v(" "),n("td",[t._v("A")]),t._v(" "),n("td",[t._v("默认")]),t._v(" "),n("td",[t._v("185.199.111.153")]),t._v(" "),n("td",[t._v("600")]),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",[t._v("@")]),t._v(" "),n("td",[t._v("A")]),t._v(" "),n("td",[t._v("默认")]),t._v(" "),n("td",[t._v("185.199.112.153")]),t._v(" "),n("td",[t._v("600")]),t._v(" "),n("td")])])]),t._v(" "),n("h4",{attrs:{id:"valine-admin后台搭建"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#valine-admin后台搭建"}},[t._v("#")]),t._v(" "),n("strong",[t._v("Valine Admin后台搭建")])]),t._v(" "),n("p",[n("a",{attrs:{href:"https://www.leancloud.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Leancloud"),n("OutboundLink")],1),t._v("注册登陆，")]),t._v(" "),n("p",[t._v("进入后，切换国际版本，配置好邮箱，电话号码，（电话号码电信一直收不到，联通可以，不知道为什么）；")]),t._v(" "),n("p",[t._v("配置完成后，就可以快速创建"),n("strong",[t._v("开发版")]),t._v("应用了；")]),t._v(" "),n("p",[t._v("在"),n("code",[t._v("设置")]),t._v("->"),n("code",[t._v("域名绑定")]),t._v("->"),n("code",[t._v("云引擎域名")]),t._v("，输入自己申请的免费域名即可，")]),t._v(" "),n("p",[t._v("验证通过后，它会要求你在申请运行商的节点配置cname别名，例如"),n("code",[t._v("j1uq1gtv.us-w1-cname.avosapps.us")])]),t._v(" "),n("p",[t._v("因为我们的域名解析改用了"),n("code",[t._v("dnspod")]),t._v("，可以在这里直接再添加一条别名即可，添加完成了，等到验证通过即可；")]),t._v(" "),n("p",[n("strong",[t._v("后台会容易休眠")])]),t._v(" "),n("p",[t._v("加入定时任务，感觉没生效，报错"),n("code",[t._v("因流控原因,通过定时任务唤醒体验版实例失败,建议升级至标准版云引擎实例避免休眠")])]),t._v(" "),n("p",[n("strong",[t._v("解决参考方案：")])]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://blog.hclonely.com/posts/ac04080d/",target:"_blank",rel:"noopener noreferrer"}},[t._v("cron-job"),n("OutboundLink")],1),t._v("，"),n("a",{attrs:{href:"https://cron-job.org/en/signup/",target:"_blank",rel:"noopener noreferrer"}},[t._v("注册地址"),n("OutboundLink")],1),t._v("，未尝试，配置麻烦")]),t._v(" "),n("li",[n("a",{attrs:{href:"https://crosschannel.cc/daily/valine-admin-autoAwaken.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Ajax请求唤醒"),n("OutboundLink")],1),t._v("，未尝试")]),t._v(" "),n("li",[n("a",{attrs:{href:"https://www.antmoe.com/posts/ff6aef7b/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitHub+Actions缺点"),n("OutboundLink")],1),t._v("，原理上，githubActions唤醒一次，其他由LeanCloud定时任务唤醒，经过尝试，定时任务也会有流控问题，可以直接换成githubActions 每29分钟发送一条请求到后台即可，这样会造成commit提交次数过多，强迫症勿用。")]),t._v(" "),n("li",[t._v("云监控系统也能唤醒LeanCloud，尝试 dnspod 添加监控，感觉可以，缺点：默认10分钟/次，浪费流量，占用CPU资源，放弃，鸡肋。")])]),t._v(" "),n("p",[n("strong",[t._v("最简单的githubAction唤醒valine-admin")])]),t._v(" "),n("div",{staticClass:"language-yaml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-yaml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'LeanCloud Self Wake'")]),t._v("\n\n "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 触发条件")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("push")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("watch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("types")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("started"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("schedule")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cron")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*/29 23-23 * * ?'")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 北京时间 7:00 - 7:59，每 29 分钟触发一次")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cron")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*/29 0-15 * * ?'")]),t._v("     "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 北京时间 8:00 - 23:59，每 29 分钟触发一次")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("curl-my-site")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n     "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n     "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n       "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'xecute command'")]),t._v("\n         "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("env")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n           "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("MY_SITE")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.SITE "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n         "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 向站点发送 GET 请求")]),t._v("\n         "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),n("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v("                                   \n           curl $MY_SITE")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br")])])])}),[],!1,null,null,null);n.default=e.exports}}]);