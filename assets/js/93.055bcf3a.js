(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{750:function(t,n,s){"use strict";s.r(n);var e=s(5),a=Object(e.a)({},(function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"title"}),s("p",[t._v("免费域名申请，"),s("a",{attrs:{href:"https://my.freenom.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("freenom"),s("OutboundLink")],1),t._v("，申请的域名是没有进行备案的，自带DNS解析速度较慢，搭配"),s("a",{attrs:{href:"https://www.dnspod.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("dnspod"),s("OutboundLink")],1),t._v("进行解析；")]),t._v(" "),s("p",[t._v("运用免费域名搭建 Valine Admin后台搭建，切换国际版，国际版的云引擎不需要域名备案")])]),t._v(" "),s("h3",{attrs:{id:"详细教程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#详细教程"}},[t._v("#")]),t._v(" "),s("strong",[s("a",{attrs:{href:"https://vuepress-theme-reco.recoluan.com/views/other/valine-admin.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("详细教程"),s("OutboundLink")],1)])]),t._v(" "),s("h4",{attrs:{id:"域名申请"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#域名申请"}},[t._v("#")]),t._v(" 域名申请：")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://my.freenom.com/",target:"_blank",rel:"noopener noreferrer"}},[s("strong",[t._v("freenom")]),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("可以用google账号直接登陆，邮箱确定不再赘述，"),s("code",[t._v("freenom")]),t._v(" 提供 "),s("code",[t._v("tk")]),t._v("、"),s("code",[t._v("ml")]),t._v("、"),s("code",[t._v("cf")]),t._v("、"),s("code",[t._v("ga")]),t._v("、"),s("code",[t._v("gq")]),t._v(" 五种后缀的免费域名；")]),t._v(" "),s("p",[t._v("检测可用性，然后添加订单，时间选择12个月，是免费的。")]),t._v(" "),s("p",[t._v("成功后，在"),s("code",[t._v("Service")]),t._v("下，"),s("code",[t._v("My Domain")]),t._v("进入管理；")]),t._v(" "),s("p",[t._v("可以看到你购买的免费域名都是"),s("strong",[t._v("激活")]),t._v("状态，点击后面的"),s("strong",[t._v("Manage Domain")]),t._v("可以设置域名解析和DNS服务器")]),t._v(" "),s("p",[t._v("点击"),s("code",[t._v("Management Tools")]),t._v("下"),s("code",[t._v("Nameservers")])]),t._v(" "),s("p",[t._v("添加"),s("code",[t._v("Nameserver")])]),t._v(" "),s("h4",{attrs:{id:"域名解析-配置别名"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#域名解析-配置别名"}},[t._v("#")]),t._v(" "),s("strong",[t._v("域名解析，配置别名")])]),t._v(" "),s("p",[s("code",[t._v("freenom")]),t._v("自带解析较差，改用"),s("a",{attrs:{href:"https://www.dnspod.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("dnspod"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("点击右上角控制台，邮箱账号注册，不再赘述；")]),t._v(" "),s("p",[t._v("进入后，点击左边目录，"),s("code",[t._v("DNS解析")]),t._v("->"),s("code",[t._v("我的域名")]),t._v("->"),s("code",[t._v("添加域名")])]),t._v(" "),s("p",[t._v("点击自己的域名，里面已经有的两条"),s("code",[t._v("NS")]),t._v("记录类型的的默认记录值，例如"),s("code",[t._v("f1g1ns1.dnspod.net")]),t._v(","),s("code",[t._v("f1g1ns2.dnspod.net.")])]),t._v(" "),s("p",[t._v("将这两条地址添加到"),s("code",[t._v("freenom")]),t._v(" 的"),s("code",[t._v("Nameserver")]),t._v("中，返回dnspod刷新即可")]),t._v(" "),s("p",[s("strong",[t._v("Valine Admin 后台评论管理 自定义域名配置")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("主机记录")]),t._v(" "),s("th",[t._v("默认类型")]),t._v(" "),s("th",[t._v("线路类型")]),t._v(" "),s("th",[t._v("记录值")]),t._v(" "),s("th",[t._v("TTL")]),t._v(" "),s("th",[t._v("备注")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("@")]),t._v(" "),s("td",[t._v("CNAME")]),t._v(" "),s("td",[t._v("默认")]),t._v(" "),s("td",[t._v("j1uq1gtv.us-w1-cname.avosapps.us.")]),t._v(" "),s("td",[t._v("600")]),t._v(" "),s("td",[t._v("对应cname")])]),t._v(" "),s("tr",[s("td",[t._v("@")]),t._v(" "),s("td",[t._v("NS")]),t._v(" "),s("td",[t._v("默认")]),t._v(" "),s("td",[t._v("f1g1ns1.dnspod.net.")]),t._v(" "),s("td",[t._v("86400")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("@")]),t._v(" "),s("td",[t._v("NS")]),t._v(" "),s("td",[t._v("默认")]),t._v(" "),s("td",[t._v("f1g1ns2.dnspod.net.")]),t._v(" "),s("td",[t._v("86400")]),t._v(" "),s("td")])])]),t._v(" "),s("p",[s("strong",[t._v("github page 自定义域名配置")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("主机记录")]),t._v(" "),s("th",[t._v("默认类型")]),t._v(" "),s("th",[t._v("线路类型")]),t._v(" "),s("th",[t._v("记录值")]),t._v(" "),s("th",[t._v("TTL")]),t._v(" "),s("th",[t._v("备注")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("@")]),t._v(" "),s("td",[t._v("www")]),t._v(" "),s("td",[t._v("默认")]),t._v(" "),s("td",[t._v("loenzo.github.io.")]),t._v(" "),s("td",[t._v("600")]),t._v(" "),s("td",[t._v("github page对应域名地址")])]),t._v(" "),s("tr",[s("td",[t._v("@")]),t._v(" "),s("td",[t._v("NS")]),t._v(" "),s("td",[t._v("默认")]),t._v(" "),s("td",[t._v("f1g1ns1.dnspod.net.")]),t._v(" "),s("td",[t._v("86400")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("@")]),t._v(" "),s("td",[t._v("NS")]),t._v(" "),s("td",[t._v("默认")]),t._v(" "),s("td",[t._v("f1g1ns2.dnspod.net.")]),t._v(" "),s("td",[t._v("86400")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("@")]),t._v(" "),s("td",[t._v("A")]),t._v(" "),s("td",[t._v("默认")]),t._v(" "),s("td",[t._v("185.199.108.153")]),t._v(" "),s("td",[t._v("600")]),t._v(" "),s("td",[t._v("github.io对应的ip地址")])]),t._v(" "),s("tr",[s("td",[t._v("@")]),t._v(" "),s("td",[t._v("A")]),t._v(" "),s("td",[t._v("默认")]),t._v(" "),s("td",[t._v("185.199.109.153")]),t._v(" "),s("td",[t._v("600")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("@")]),t._v(" "),s("td",[t._v("A")]),t._v(" "),s("td",[t._v("默认")]),t._v(" "),s("td",[t._v("185.199.110.153")]),t._v(" "),s("td",[t._v("600")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("@")]),t._v(" "),s("td",[t._v("A")]),t._v(" "),s("td",[t._v("默认")]),t._v(" "),s("td",[t._v("185.199.111.153")]),t._v(" "),s("td",[t._v("600")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("@")]),t._v(" "),s("td",[t._v("A")]),t._v(" "),s("td",[t._v("默认")]),t._v(" "),s("td",[t._v("185.199.112.153")]),t._v(" "),s("td",[t._v("600")]),t._v(" "),s("td")])])]),t._v(" "),s("h4",{attrs:{id:"valine-admin后台搭建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#valine-admin后台搭建"}},[t._v("#")]),t._v(" "),s("strong",[t._v("Valine Admin后台搭建")])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.leancloud.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Leancloud"),s("OutboundLink")],1),t._v("注册登陆，")]),t._v(" "),s("p",[t._v("进入后，切换国际版本，配置好邮箱，电话号码，（电话号码电信一直收不到，联通可以，不知道为什么）；")]),t._v(" "),s("p",[t._v("配置完成后，就可以快速创建"),s("strong",[t._v("开发版")]),t._v("应用了；")]),t._v(" "),s("p",[t._v("在"),s("code",[t._v("设置")]),t._v("->"),s("code",[t._v("域名绑定")]),t._v("->"),s("code",[t._v("云引擎域名")]),t._v("，输入自己申请的免费域名即可，")]),t._v(" "),s("p",[t._v("验证通过后，它会要求你在申请运行商的节点配置cname别名，例如"),s("code",[t._v("j1uq1gtv.us-w1-cname.avosapps.us")])]),t._v(" "),s("p",[t._v("因为我们的域名解析改用了"),s("code",[t._v("dnspod")]),t._v("，可以在这里直接再添加一条别名即可，添加完成了，等到验证通过即可；")]),t._v(" "),s("p",[s("strong",[t._v("后台会容易休眠")])]),t._v(" "),s("p",[t._v("加入定时任务，感觉没生效，报错"),s("code",[t._v("因流控原因,通过定时任务唤醒体验版实例失败,建议升级至标准版云引擎实例避免休眠")])]),t._v(" "),s("p",[s("strong",[t._v("解决参考方案：")])]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://blog.hclonely.com/posts/ac04080d/",target:"_blank",rel:"noopener noreferrer"}},[t._v("cron-job"),s("OutboundLink")],1),t._v("，"),s("a",{attrs:{href:"https://cron-job.org/en/signup/",target:"_blank",rel:"noopener noreferrer"}},[t._v("注册地址"),s("OutboundLink")],1),t._v("，未尝试，配置麻烦")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://crosschannel.cc/daily/valine-admin-autoAwaken.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Ajax请求唤醒"),s("OutboundLink")],1),t._v("，未尝试")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.antmoe.com/posts/ff6aef7b/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitHub+Actions缺点"),s("OutboundLink")],1),t._v("，原理上，githubActions唤醒一次，其他由LeanCloud定时任务唤醒，经过尝试，定时任务也会有流控问题，可以直接换成githubActions 每29分钟发送一条请求到后台即可，这样会造成commit提交次数过多，强迫症勿用。")]),t._v(" "),s("li",[t._v("云监控系统也能唤醒LeanCloud，尝试 dnspod 添加监控，感觉可以，缺点：默认10分钟/次，浪费流量，占用CPU资源，放弃，鸡肋。")])]),t._v(" "),s("p",[s("strong",[t._v("最简单的githubAction唤醒valine-admin")])]),t._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'LeanCloud Self Wake'")]),t._v("\n\n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 触发条件")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("watch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("types")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("started"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("schedule")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cron")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*/29 23-23 * * ?'")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 北京时间 7:00 - 7:59，每 29 分钟触发一次")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cron")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*/29 0-15 * * ?'")]),t._v("     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 北京时间 8:00 - 23:59，每 29 分钟触发一次")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("curl-my-site")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n     "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'xecute command'")]),t._v("\n         "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("env")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n           "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("MY_SITE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.SITE "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n         "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 向站点发送 GET 请求")]),t._v("\n         "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v("                                   \n           curl $MY_SITE")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br")])])])}),[],!1,null,null,null);n.default=a.exports}}]);