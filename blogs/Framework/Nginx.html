<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Nginx入门 | 杂乱无章</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icon_vuepress_hjwu.png">
    <link rel="mask-icon" href="/icon_vuepress_hjwu.svg" color="#42b983">
    <script language="javascript" type="text/javascript" src="/js/jquery-3.5.1.min.js"></script>
    <script language="javascript" type="text/javascript" src="/js/mouseClickEffect.js"></script>
    <meta name="description" content="前山微有雨, 永巷净无尘">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="author" content="Enzo">
    <meta name="keywords" content="vuepress,enzo,hjwu">
    <meta name="theme-color" content="#42b983">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icon_vuepress_hjwu.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.579f7cb5.css" as="style"><link rel="preload" href="/assets/js/app.8d4572e2.js" as="script"><link rel="preload" href="/assets/js/3.b0a99e7f.js" as="script"><link rel="preload" href="/assets/js/1.ec2f8a40.js" as="script"><link rel="preload" href="/assets/js/17.8440d99c.js" as="script"><link rel="preload" href="/assets/js/26.49c6337a.js" as="script"><link rel="prefetch" href="/assets/js/10.d68791da.js"><link rel="prefetch" href="/assets/js/100.e171cd70.js"><link rel="prefetch" href="/assets/js/101.673bbd0a.js"><link rel="prefetch" href="/assets/js/102.76824bfd.js"><link rel="prefetch" href="/assets/js/11.2d66ac43.js"><link rel="prefetch" href="/assets/js/12.29bccb0b.js"><link rel="prefetch" href="/assets/js/13.c5140120.js"><link rel="prefetch" href="/assets/js/14.9aa2ca7f.js"><link rel="prefetch" href="/assets/js/15.a6c88978.js"><link rel="prefetch" href="/assets/js/16.fe90f432.js"><link rel="prefetch" href="/assets/js/18.08f114a0.js"><link rel="prefetch" href="/assets/js/19.07c64e08.js"><link rel="prefetch" href="/assets/js/20.4d0cc925.js"><link rel="prefetch" href="/assets/js/21.ef7d1c60.js"><link rel="prefetch" href="/assets/js/22.03ea1ad3.js"><link rel="prefetch" href="/assets/js/23.0bc4d592.js"><link rel="prefetch" href="/assets/js/24.410fdc12.js"><link rel="prefetch" href="/assets/js/25.13eb4251.js"><link rel="prefetch" href="/assets/js/27.16335ea2.js"><link rel="prefetch" href="/assets/js/28.fecb0d35.js"><link rel="prefetch" href="/assets/js/29.d084e093.js"><link rel="prefetch" href="/assets/js/30.077e39da.js"><link rel="prefetch" href="/assets/js/31.9b49bfe2.js"><link rel="prefetch" href="/assets/js/32.04f63038.js"><link rel="prefetch" href="/assets/js/33.37e3f2a8.js"><link rel="prefetch" href="/assets/js/34.48570917.js"><link rel="prefetch" href="/assets/js/35.d1cfc565.js"><link rel="prefetch" href="/assets/js/36.3c259a56.js"><link rel="prefetch" href="/assets/js/37.0b9c5ae0.js"><link rel="prefetch" href="/assets/js/38.bf8e9a09.js"><link rel="prefetch" href="/assets/js/39.8f53bc8e.js"><link rel="prefetch" href="/assets/js/4.bb60f035.js"><link rel="prefetch" href="/assets/js/40.81336f0e.js"><link rel="prefetch" href="/assets/js/41.9f7ed1ba.js"><link rel="prefetch" href="/assets/js/42.e20ff6bd.js"><link rel="prefetch" href="/assets/js/43.c384930d.js"><link rel="prefetch" href="/assets/js/44.a03e454c.js"><link rel="prefetch" href="/assets/js/45.015eb798.js"><link rel="prefetch" href="/assets/js/46.7cf7f847.js"><link rel="prefetch" href="/assets/js/47.638fd725.js"><link rel="prefetch" href="/assets/js/48.1d29e292.js"><link rel="prefetch" href="/assets/js/49.4403e18f.js"><link rel="prefetch" href="/assets/js/5.e107f7f4.js"><link rel="prefetch" href="/assets/js/50.aeb773b0.js"><link rel="prefetch" href="/assets/js/51.004d78ef.js"><link rel="prefetch" href="/assets/js/52.14961432.js"><link rel="prefetch" href="/assets/js/53.a1ba020e.js"><link rel="prefetch" href="/assets/js/54.ae78d5b8.js"><link rel="prefetch" href="/assets/js/55.86b36257.js"><link rel="prefetch" href="/assets/js/56.3bdf867d.js"><link rel="prefetch" href="/assets/js/57.f0f16354.js"><link rel="prefetch" href="/assets/js/58.5962dee0.js"><link rel="prefetch" href="/assets/js/59.068f15a3.js"><link rel="prefetch" href="/assets/js/6.2f5144ae.js"><link rel="prefetch" href="/assets/js/60.3ddf2a61.js"><link rel="prefetch" href="/assets/js/61.1a4a31be.js"><link rel="prefetch" href="/assets/js/62.6faf1665.js"><link rel="prefetch" href="/assets/js/63.d06ead22.js"><link rel="prefetch" href="/assets/js/64.4f41f2bd.js"><link rel="prefetch" href="/assets/js/65.6c32709f.js"><link rel="prefetch" href="/assets/js/66.f605ed1c.js"><link rel="prefetch" href="/assets/js/67.75f6e4f7.js"><link rel="prefetch" href="/assets/js/68.5089b831.js"><link rel="prefetch" href="/assets/js/69.833ff483.js"><link rel="prefetch" href="/assets/js/7.02ee3bbe.js"><link rel="prefetch" href="/assets/js/70.1748387c.js"><link rel="prefetch" href="/assets/js/71.8ad185c2.js"><link rel="prefetch" href="/assets/js/72.f3556bd6.js"><link rel="prefetch" href="/assets/js/73.4af64b64.js"><link rel="prefetch" href="/assets/js/74.b3fb6ef2.js"><link rel="prefetch" href="/assets/js/75.756edf51.js"><link rel="prefetch" href="/assets/js/76.e154e068.js"><link rel="prefetch" href="/assets/js/77.b4327c58.js"><link rel="prefetch" href="/assets/js/78.e7b55000.js"><link rel="prefetch" href="/assets/js/79.a708c8ee.js"><link rel="prefetch" href="/assets/js/8.2e437bfb.js"><link rel="prefetch" href="/assets/js/80.ad820b2a.js"><link rel="prefetch" href="/assets/js/81.561128ca.js"><link rel="prefetch" href="/assets/js/82.2aa39e59.js"><link rel="prefetch" href="/assets/js/83.2507ce62.js"><link rel="prefetch" href="/assets/js/84.93179863.js"><link rel="prefetch" href="/assets/js/85.bf4de8da.js"><link rel="prefetch" href="/assets/js/86.4329f282.js"><link rel="prefetch" href="/assets/js/87.304bb15c.js"><link rel="prefetch" href="/assets/js/88.07e1d374.js"><link rel="prefetch" href="/assets/js/89.dbb97094.js"><link rel="prefetch" href="/assets/js/9.e8313bdc.js"><link rel="prefetch" href="/assets/js/90.34735e25.js"><link rel="prefetch" href="/assets/js/91.8076ac81.js"><link rel="prefetch" href="/assets/js/92.26b91da4.js"><link rel="prefetch" href="/assets/js/93.7b1b1563.js"><link rel="prefetch" href="/assets/js/94.f56365c3.js"><link rel="prefetch" href="/assets/js/95.597bcf05.js"><link rel="prefetch" href="/assets/js/96.5770c996.js"><link rel="prefetch" href="/assets/js/97.c5980ebb.js"><link rel="prefetch" href="/assets/js/98.478a758a.js"><link rel="prefetch" href="/assets/js/99.2fc9ee25.js">
    <link rel="stylesheet" href="/assets/css/0.styles.579f7cb5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>杂乱无章</h3> <p class="description" data-v-4e82dffc data-v-4e82dffc>前山微有雨, 永巷净无尘</p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>Enzo</span>
            
          <span data-v-4e82dffc>2017 - </span>
          2021
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.jpg" alt="杂乱无章" class="logo"> <span class="site-name">杂乱无章</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/BigData/" class="nav-link"><i class="undefined"></i>
  BigData
</a></li><li class="dropdown-item"><!----> <a href="/categories/DevTools/" class="nav-link"><i class="undefined"></i>
  DevTools
</a></li><li class="dropdown-item"><!----> <a href="/categories/Framework/" class="nav-link"><i class="undefined"></i>
  Framework
</a></li><li class="dropdown-item"><!----> <a href="/categories/GoNotes/" class="nav-link"><i class="undefined"></i>
  GoNotes
</a></li><li class="dropdown-item"><!----> <a href="/categories/JavaNotes/" class="nav-link"><i class="undefined"></i>
  JavaNotes
</a></li><li class="dropdown-item"><!----> <a href="/categories/LinuxNotes/" class="nav-link"><i class="undefined"></i>
  LinuxNotes
</a></li><li class="dropdown-item"><!----> <a href="/categories/OperationMaintenance/" class="nav-link"><i class="undefined"></i>
  OperationMaintenance
</a></li><li class="dropdown-item"><!----> <a href="/categories/Other/" class="nav-link"><i class="undefined"></i>
  Other
</a></li><li class="dropdown-item"><!----> <a href="/categories/SpringCloudNotes/" class="nav-link"><i class="undefined"></i>
  SpringCloudNotes
</a></li><li class="dropdown-item"><!----> <a href="/categories/StudyNotes/" class="nav-link"><i class="undefined"></i>
  StudyNotes
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-api"></i>
      Tools
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://tool.lu/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-api"></i>
  码农工具站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://67tool.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-api"></i>
  在线工具站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.macrozheng.com/#/README" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-api"></i>
  mall学习
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/blogs/other/Projects-demo.html" class="nav-link"><i class="iconfont reco-category"></i>
  ProjectsDemo
</a></li></ul></div></div> <a href="https://github.com/LoEnzo/LoEnzo.github.io" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-github"></i>
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><img src="/avatar.jpg" alt="author-avatar" class="personal-img" data-v-828910c6> <h3 class="name" data-v-828910c6>
    Enzo
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>88</h3> <h6 data-v-828910c6>Articles</h6></div> <div data-v-828910c6><h3 data-v-828910c6>84</h3> <h6 data-v-828910c6>Tags</h6></div></div> <ul class="social-links" data-v-828910c6><li class="social-item" data-v-828910c6><i class="iconfont reco-github" style="color:#f47e60;" data-v-828910c6></i></li><li class="social-item" data-v-828910c6><i class="iconfont reco-mayun" style="color:#abbd81;" data-v-828910c6></i></li><li class="social-item" data-v-828910c6><i class="iconfont reco-account" style="color:#e15b64;" data-v-828910c6></i></li><li class="social-item" data-v-828910c6><i class="iconfont reco-other" style="color:#67cc86;" data-v-828910c6></i></li><li class="social-item" data-v-828910c6><i class="iconfont reco-lock" style="color:#f8b26a;" data-v-828910c6></i></li><li class="social-item" data-v-828910c6><i class="iconfont reco-lock" style="color:#fb9b5f;" data-v-828910c6></i></li></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/BigData/" class="nav-link"><i class="undefined"></i>
  BigData
</a></li><li class="dropdown-item"><!----> <a href="/categories/DevTools/" class="nav-link"><i class="undefined"></i>
  DevTools
</a></li><li class="dropdown-item"><!----> <a href="/categories/Framework/" class="nav-link"><i class="undefined"></i>
  Framework
</a></li><li class="dropdown-item"><!----> <a href="/categories/GoNotes/" class="nav-link"><i class="undefined"></i>
  GoNotes
</a></li><li class="dropdown-item"><!----> <a href="/categories/JavaNotes/" class="nav-link"><i class="undefined"></i>
  JavaNotes
</a></li><li class="dropdown-item"><!----> <a href="/categories/LinuxNotes/" class="nav-link"><i class="undefined"></i>
  LinuxNotes
</a></li><li class="dropdown-item"><!----> <a href="/categories/OperationMaintenance/" class="nav-link"><i class="undefined"></i>
  OperationMaintenance
</a></li><li class="dropdown-item"><!----> <a href="/categories/Other/" class="nav-link"><i class="undefined"></i>
  Other
</a></li><li class="dropdown-item"><!----> <a href="/categories/SpringCloudNotes/" class="nav-link"><i class="undefined"></i>
  SpringCloudNotes
</a></li><li class="dropdown-item"><!----> <a href="/categories/StudyNotes/" class="nav-link"><i class="undefined"></i>
  StudyNotes
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-api"></i>
      Tools
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://tool.lu/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-api"></i>
  码农工具站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://67tool.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-api"></i>
  在线工具站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.macrozheng.com/#/README" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-api"></i>
  mall学习
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/blogs/other/Projects-demo.html" class="nav-link"><i class="iconfont reco-category"></i>
  ProjectsDemo
</a></li></ul></div></div> <a href="https://github.com/LoEnzo/LoEnzo.github.io" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-github"></i>
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Framework</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blogs/Framework/Docker.html" class="sidebar-link">Docker</a></li><li><a href="/blogs/Framework/DockerCompose.html" class="sidebar-link">Docker进阶之Dockerfile</a></li><li><a href="/blogs/Framework/DockerMore.html" class="sidebar-link">Docker容器相关</a></li><li><a href="/blogs/Framework/Dockerfile.html" class="sidebar-link">Docker进阶之Dockerfile</a></li><li><a href="/blogs/Framework/Logback.html" class="sidebar-link">Logback的使用</a></li><li><a href="/blogs/Framework/Lombok.html" class="sidebar-link">Lombok</a></li><li><a href="/blogs/Framework/MybatisPlus.html" class="sidebar-link">Mybatis-Plus的使用</a></li><li><a href="/blogs/Framework/Mysql.html" class="sidebar-link">Mysql 操作手册</a></li><li><a href="/blogs/Framework/Nginx.html" aria-current="page" class="active sidebar-link">Nginx入门</a></li><li><a href="/blogs/Framework/Redis.html" class="sidebar-link">Redis入门</a></li><li><a href="/blogs/Framework/SpringBoot.html" class="sidebar-link">SpringBoot介绍及简单使用</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>Nginx入门</h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>Enzo</span>
            
          <span data-v-4e82dffc>2017 - </span>
          2021
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title">Nginx入门</h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>Enzo</span></i> <i class="iconfont reco-date" data-v-1ff7123e><span data-v-1ff7123e>6/21/2021</span></i> <i class="iconfont reco-eye" data-v-1ff7123e><span id="/blogs/Framework/Nginx.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-1ff7123e><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="tags iconfont reco-tag" data-v-1ff7123e><span class="tag-item" data-v-1ff7123e>Nginx</span></i></div></div> <div class="theme-reco-content content__default"><div class="custom-block tip"><p class="title"></p><p>nginx是一款自由的、开源的、高性能的HTTP服务器和反向代理服务器；同时也是一个IMAP、POP3、SMTP代理服务器；nginx可以作为一个HTTP服务器进行网站的发布处理，另外nginx可以作为反向代理进行负载均衡的实现。</p></div> <h1 id="下载安装"><a href="#下载安装" class="header-anchor">#</a> 下载安装</h1> <ul><li><a href="http://nginx.org/en/download.html" target="_blank" rel="noopener noreferrer">官网下载<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，解压安装，或者<code>yum</code>安装</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 进入解压目录</span>

<span class="token comment"># 编译安装，依次执行</span>
./configure --prefix<span class="token operator">=</span>/usr/local/webserver/nginx --with-http_stub_status_module --with-http_ssl_module --with-pcre<span class="token operator">=</span>/usr/local/src/pcre-8.35
<span class="token function">make</span>
<span class="token function">make</span> <span class="token function">install</span>

<span class="token comment"># 查看版本</span>
nginx -v

<span class="token comment"># 防火墙开放80端口号</span>
firewall-cmd --permanent --zone<span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">80</span>/tcp
<span class="token comment"># 重启防火墙	</span>
firewall-cmd --reload
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>常用指令</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>nginx						<span class="token comment"># 启动nginx, 访问 http://服务器ip，看到ngnix欢迎页面即可</span>
nginx -t					<span class="token comment"># 检查配置文件语法是否正确</span>
nginx -s reload				<span class="token comment"># 重新载入配置文件</span>
nginx -s reopen				<span class="token comment"># 重启 Nginx</span>
nginx -s stop				<span class="token comment"># 停止 Nginx</span>
nginx -s quit				<span class="token comment"># 正常停止 Nginx</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h1 id="nginx常用功能"><a href="#nginx常用功能" class="header-anchor">#</a> Nginx常用功能</h1> <h2 id="参考文档"><a href="#参考文档" class="header-anchor">#</a> 参考文档</h2> <ul><li><a href="https://www.nginx.cn/doc/index.html" target="_blank" rel="noopener noreferrer">Nginx中文文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="反向代理"><a href="#反向代理" class="header-anchor">#</a> 反向代理</h2> <p>反向代理图文说明，摘自<strong>菜鸟教程</strong></p> <p><img src="/assets/img/nginx01.9dbeb7b8.jpg" alt="反向代理图示"></p> <ul><li><strong>左边：正向代理</strong></li></ul> <p>理解：正向代理可以用VPN来理解，访问外网，需要科学上网，通过VPN工具，自动选取为最有线路，比如香港、新加坡节点，通过它们去访问了 谷歌 等应用，谷歌他们看到的就是通过香港、新加坡动态代理过去的ip，并不是我们真实的ip</p> <ul><li><strong>右边：反向代理</strong></li></ul> <p>理解：反向代理可以随便用一个电商例子理解，电商发展壮大，后台不可能一直是在一台服务器上部署单体应用，会不断的拆分升级，还会多部署一些服务器好负载均衡。问题就来了，这么多的后台应用服务器，用户又不知道服务器ip，怎么指导具体访问哪一台呢，这时候就需要 Ngnix了，用户访问 Nginx ，Nginx服务转发到对应的服务器就行了，这对于用于来说就是无感的，用户就访问量的应用的域名，然后得到了自己想要的结果</p> <h2 id="负载均衡"><a href="#负载均衡" class="header-anchor">#</a> 负载均衡</h2> <ul><li><p>weight轮询（默认）</p> <p>简单理解就是进来的请求，nginx按顺序轮流转发到后台服务器，确保每台服务器接收的请求数量均匀，不会导致单台服务器接收大量请求导致超时或服务器崩溃</p></li></ul> <p><img src="/assets/img/nginx02.66a65e3f.jpg" alt="nginx 轮询"></p> <ul><li><p>加权轮询</p> <p>有些服务器的配置要高一些，如果和其他服务器接收一样数量的请求，未免有些资源浪费，所以，对服务器可以配置权重，权重越高，可接受的请求就越多</p></li></ul> <p><img src="/assets/img/nginx03.92cf5383.jpg" alt="nginx 加权轮询"></p> <ul><li><p>ip hash</p> <p>客户调用某台服务器登陆了应用，在应用内调用其他业务，如果转发到了其他服务器，由于session不共享，会认为客户没有登陆而要求重新登陆，这样显然是不合理的，所以 每个请求按照发起客户端的ip的hash结果进行匹配，确保固定ip的客户端访问到同一台后台服务器</p></li></ul> <p><img src="/assets/img/nginx04.3dd7000a.jpg" alt="nginx ip hash"></p> <h2 id="其他优点"><a href="#其他优点" class="header-anchor">#</a> 其他优点</h2> <ul><li>支持高并发连接，tomcat大概支持500个，nginx支持50000个连接；</li> <li>内存消耗低，开源免费，成本低廉，支持集群，配置简单，稳定性高，支持热部署</li> <li>支持Rewrite重写，能够根据域名、URL的不同，将http请求分到不同的后端服务器群组</li> <li>支持静态文件处理，降低网络开销等</li></ul> <h1 id="nignx配置"><a href="#nignx配置" class="header-anchor">#</a> Nignx配置</h1> <h2 id="配置文件基本模块说明"><a href="#配置文件基本模块说明" class="header-anchor">#</a> 配置文件基本模块说明</h2> <ul><li><code>main</code>：用于进行nginx全局信息的配置</li> <li><code>events</code>：用于nginx工作模式的配置</li> <li><code>http</code>：用于进行http协议信息的一些配置</li> <li><code>server</code>：用于进行服务器访问信息的配置</li> <li><code>location</code>：用于进行访问路由的配置</li> <li><code>upstream</code>：用于进行负载均衡的配置</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>main								<span class="token comment"># 全局配置</span>

events <span class="token punctuation">{</span>							<span class="token comment"># nginx工作模式配置</span>
<span class="token punctuation">}</span>

http <span class="token punctuation">{</span>								<span class="token comment"># http设置</span>
    <span class="token punctuation">..</span><span class="token punctuation">..</span>    
    upstream name <span class="token punctuation">{</span>					<span class="token comment"># 负载均衡配置</span>
        <span class="token punctuation">..</span><span class="token punctuation">..</span>
    <span class="token punctuation">}</span>    

    server <span class="token punctuation">{</span>						<span class="token comment"># 服务器主机配置，可多个</span>
        <span class="token punctuation">..</span><span class="token punctuation">..</span>
        location <span class="token punctuation">{</span>					<span class="token comment"># 路由配置，可多个，支持正则</span>
            <span class="token punctuation">..</span><span class="token punctuation">..</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    server <span class="token punctuation">{</span>
        location <span class="token punctuation">{</span>
            <span class="token punctuation">..</span><span class="token punctuation">..</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="main模块"><a href="#main模块" class="header-anchor">#</a> main模块</h2> <p><strong>示例</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># user nobody nobody;</span>
worker_processes <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token comment"># error_log logs/error.log</span>
<span class="token comment"># error_log logs/error.log notice</span>
<span class="token comment"># error_log logs/error.log info</span>
<span class="token comment"># pid logs/nginx.pid</span>
worker_rlimit_nofile <span class="token number">1024</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>说明</strong></p> <ul><li><code>user</code>：用来指定nginx worker进程运行用户以及用户组，默认nobody账号运行</li> <li><code>worker_processes</code>：指定nginx要开启的子进程数量，运行过程中监控每个进程消耗内存(一般几M~几十M不等)根据实际情况进行调整，<code>通常数量是CPU内核数量的整数倍</code></li> <li><code>error_log</code>：定义错误日志文件的位置及输出级别【debug / info / notice / warn / error / crit】</li> <li><code>pid</code>：用来指定进程id的存储文件的位置</li> <li><code>worker_rlimit_nofile</code>：用于指定一个进程可以打开最多文件数量的描述</li></ul> <h2 id="events模块"><a href="#events模块" class="header-anchor">#</a> events模块</h2> <p><strong>示例</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>event <span class="token punctuation">{</span>
    worker_connections <span class="token number">1024</span><span class="token punctuation">;</span>
    multi_accept on<span class="token punctuation">;</span>
    use epoll<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>说明</strong></p> <ul><li><code>worker_connections</code>：指定最大可以同时接收的连接数量，这里一定要注意，最大连接数量是和worker processes共同决定的。</li> <li><code>multi_accept</code>：配置指定nginx在收到一个新连接通知后尽可能多的接受更多的连接</li> <li><code>use epoll</code>：配置指定了线程轮询的方法，如果是linux2.6+，使用epoll，如果是BSD如Mac请使用Kqueue</li></ul> <h2 id="http模块"><a href="#http模块" class="header-anchor">#</a> http模块</h2> <p>作为web服务器，http模块是nginx最核心的一个模块，配置项也是比较多的，项目中会设置到很多的实际业务场景，需要根据硬件信息进行适当的配置，常规情况下，使用默认配置即可！</p> <p><strong>示例</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>http <span class="token punctuation">{</span>
    <span class="token comment">##</span>
    <span class="token comment"># 基础配置</span>
    <span class="token comment">##</span>

    sendfile on<span class="token punctuation">;</span>
    tcp_nopush on<span class="token punctuation">;</span>
    tcp_nodelay on<span class="token punctuation">;</span>
    keepalive_timeout <span class="token number">65</span><span class="token punctuation">;</span>
    types_hash_max_size <span class="token number">2048</span><span class="token punctuation">;</span>
    <span class="token comment"># server_tokens off;</span>

    <span class="token comment"># server_names_hash_bucket_size 64;</span>
    <span class="token comment"># server_name_in_redirect off;</span>

    include /etc/nginx/mime.types<span class="token punctuation">;</span>
    default_type application/octet-stream<span class="token punctuation">;</span>

    <span class="token comment">##</span>
    <span class="token comment"># SSL证书配置</span>
    <span class="token comment">##</span>

    ssl_protocols TLSv1 TLSv1.1 TLSv1.2<span class="token punctuation">;</span> <span class="token comment"># Dropping SSLv3, ref: POODLE</span>
    ssl_prefer_server_ciphers on<span class="token punctuation">;</span>

    <span class="token comment">##</span>
    <span class="token comment"># 日志配置</span>
    <span class="token comment">##</span>

    access_log /var/log/nginx/access.log<span class="token punctuation">;</span>
    error_log /var/log/nginx/error.log<span class="token punctuation">;</span>

    <span class="token comment">##</span>
    <span class="token comment"># Gzip 压缩配置</span>
    <span class="token comment">##</span>

    <span class="token function">gzip</span> on<span class="token punctuation">;</span>
    gzip_disable <span class="token string">&quot;msie6&quot;</span><span class="token punctuation">;</span>

    <span class="token comment"># gzip_vary on;</span>
    <span class="token comment"># gzip_proxied any;</span>
    <span class="token comment"># gzip_comp_level 6;</span>
    <span class="token comment"># gzip_buffers 16 8k;</span>
    <span class="token comment"># gzip_http_version 1.1;</span>
    <span class="token comment"># gzip_types text/plain text/css application/json application/javascript</span>
 text/xml application/xml application/xml+rss text/javascript<span class="token punctuation">;</span>

    <span class="token comment">##</span>
    <span class="token comment"># 虚拟主机配置</span>
    <span class="token comment">##</span>

    include /etc/nginx/conf.d/*.conf<span class="token punctuation">;</span>
    include /etc/nginx/sites-enabled/*<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><p><strong>说明</strong></p> <ul><li>基础配置</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>sendfile on		<span class="token comment"># 配置on让sendfile发挥作用，将文件的回写过程交给数据缓冲去去完成，而不是放在应用中完成，这样的话在性能提升有有好处</span>
tc_nopush on	<span class="token comment"># 让nginx在一个数据包中发送所有的头文件，而不是一个一个单独发</span>
tcp_nodelay on	<span class="token comment"># 让nginx不要缓存数据，而是一段一段发送，如果数据的传输有实时性的要求的话可以配置它，发送完一小段数据就立刻能得到返回值，但是不要滥用哦</span>

keepalive_timeout <span class="token number">10</span>		<span class="token comment"># 给客户端分配连接超时时间，服务器会在这个时间过后关闭连接。一般设置时间较短，可以让nginx工作持续性更好</span>
client_header_timeout <span class="token number">10</span>	<span class="token comment"># 设置请求头的超时时间</span>
client_body_timeout <span class="token number">10</span>		<span class="token comment"># 设置请求体的超时时间</span>
send_timeout <span class="token number">10</span>				<span class="token comment"># 指定客户端响应超时时间，如果客户端两次操作间隔超过这个时间，服务器就会关闭这个链接</span>

limit_conn_zone <span class="token variable">$binary_remote_addr</span> <span class="token assign-left variable">zone</span><span class="token operator">=</span>addr:5m	<span class="token comment"># 设置用于保存各种key的共享内存的参数，</span>
limit_conn addr <span class="token number">100</span>			<span class="token comment"># 给定的key设置最大连接数</span>

server_tokens				<span class="token comment"># 虽然不会让nginx执行速度更快，但是可以在错误页面关闭nginx版本提示，对于网站安全性的提升有好处哦</span>
include /etc/nginx/mime.types			<span class="token comment"># 指定在当前文件中包含另一个文件的指令</span>
default_type application/octet-stream	<span class="token comment"># 指定默认处理的文件类型可以是二进制</span>
type_hash_max_size <span class="token number">2048</span>	<span class="token comment"># 混淆数据，影响三列冲突率，值越大消耗内存越多，散列key冲突率会降低，检索速度更快；值越小key，占用内存较少，冲突率越高，检索速度变慢</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li>日志配置</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>access_log logs/access.log	<span class="token comment"># 设置存储访问记录的日志</span>
error_log logs/error.log	<span class="token comment"># 设置存储记录错误发生的日志</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>SSL证书加密</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>ssl_protocols	<span class="token comment"># 指令用于启动特定的加密协议，nginx在1.1.13和1.0.12版本后默认是ssl_protocols SSLv3 TLSv1 TLSv1.1 TLSv1.2，TLSv1.1与TLSv1.2要确保OpenSSL &gt;= 1.0.1 ，SSLv3 现在还有很多地方在用但有不少被攻击的漏洞。</span>
ssl prefer server ciphers	<span class="token comment"># 设置协商加密算法时，优先使用我们服务端的加密套件，而不是客户端浏览器的加密套件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>压缩配置</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">gzip</span>			<span class="token comment"># 是告诉nginx采用gzip压缩的形式发送数据。这将会减少我们发送的数据量。</span>
gzip_disable	<span class="token comment"># 为指定的客户端禁用gzip功能。我们设置成IE6或者更低版本以使我们的方案能够广泛兼容。</span>
gzip_static		<span class="token comment"># 告诉nginx在压缩资源之前，先查找是否有预先gzip处理过的资源。这要求你预先压缩你的文件（在这个例子中被注释掉了），从而允许你使用最高压缩比，这样nginx就不用再压缩这些文件了（想要更详尽的gzip_static的信息，请点击这里）。</span>
gzip_proxied	<span class="token comment"># 允许或者禁止压缩基于请求和响应的响应流。我们设置为any，意味着将会压缩所有的请求。</span>
gzip_min_length	<span class="token comment"># 设置对数据启用压缩的最少字节数。如果一个请求小于1000字节，我们最好不要压缩它，因为压缩这些小的数据会降低处理此请求的所有进程的速度。</span>
gzip_comp_level	<span class="token comment"># 设置数据的压缩等级。这个等级可以是1-9之间的任意数值，9是最慢但是压缩比最大的。我们设置为4，这是一个比较折中的设置。</span>
gzip_type		<span class="token comment"># 设置需要压缩的数据格式。上面例子中已经有一些了，你也可以再添加更多的格式。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>文件缓存配置</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>open_file_cache				<span class="token comment"># 打开缓存的同时也指定了缓存最大数目，以及缓存的时间。我们可以设置一个相对高的最大时间，这样我们可以在它们不活动超过20秒后清除掉。</span>
open_file_cache_valid		<span class="token comment"># 在open_file_cache中指定检测正确信息的间隔时间。</span>
open_file_cache_min_uses	<span class="token comment"># 定义了open_file_cache中指令参数不活动时间期间里最小的文件数。</span>
open_file_cache_errors		<span class="token comment"># 指定了当搜索一个文件时是否缓存错误信息，也包括再次给配置中添加文件。我们也包括了服务器模块，这些是在不同文件中定义的。如果你的服务器模块不在这些位置，你就得修改这一行来指定正确的位置。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="server模块"><a href="#server模块" class="header-anchor">#</a> server模块</h2> <p>server模块配置是http模块中的一个子模块，用来定义一个虚拟访问主机，也就是一个虚拟服务器的配置信息</p> <ul><li><code>server</code>：一个虚拟主机的配置，一个http中可以配置多个server</li> <li><code>server_name</code>：用力啊指定ip地址或者域名，多个配置之间用空格分隔</li> <li><code>root</code>：表示整个server虚拟主机内的根目录，所有当前主机中web项目的根目录</li> <li><code>index</code>：用户访问web网站时的全局首页</li> <li><code>charset</code>：用于设置www/路径中配置的网页的默认编码格式</li> <li><code>access_log</code>：用于指定该虚拟主机服务器中的访问记录日志存放路径</li> <li><code>error_log</code>：用于指定该虚拟主机服务器中访问错误日志的存放路径</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>server <span class="token punctuation">{</span>
    listen	<span class="token number">80</span><span class="token punctuation">;</span>
    server_name localhost    <span class="token number">192.168</span>.1.100<span class="token punctuation">;</span>
    root		/nginx/www<span class="token punctuation">;</span>
    index		index.php index.html index.html<span class="token punctuation">;</span>
    charset		utf-8<span class="token punctuation">;</span>
    access_log	logs/access.log<span class="token punctuation">;</span>
    error_log	logs/error.log<span class="token punctuation">;</span>
    <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="location模块"><a href="#location模块" class="header-anchor">#</a> location模块</h2> <p>location模块是nginx配置中出现最多的一个配置，主要用于配置路由访问信息</p> <p>在路由访问信息配置中关联到反向代理、负载均衡等等各项功能，所以location模块也是一个非常重要的配置模块，配置反向代理，通过proxy_set配置让客户端访问透明化</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>location / <span class="token punctuation">{</span>
    root	/nginx/www<span class="token punctuation">;</span>
    index	index.php index.html index.htm<span class="token punctuation">;</span>

    proxy_pass http://localhost:8888<span class="token punctuation">;</span>
    proxy_set_header X-real-ip <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>
    proxy_set_header Host <span class="token variable">$http_host</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li><code>location /</code>：表示匹配访问根目录</li> <li><code>root</code>：用于指定访问根目录时，访问虚拟主机的web目录</li> <li><code>index</code>：在不指定访问具体资源时，默认展示的资源文件列表</li></ul> <p>常见的占位符配置</p> <ul><li><code>$remote_addr</code> 与 <code>$http_x_forwarded_for</code> ：用以记录客户端的ip地址；</li> <li><code>$remote_user</code>： 用来记录客户端用户名称；</li> <li><code>$time_local</code>  ：用来记录访问时间与时区；</li> <li><code>$request</code> ：用来记录请求的url与http协议；</li> <li><code>$status</code> ：用来记录请求状态；成功是200；</li> <li><code>$body_bytes_s ent</code>： 记录发送给客户端文件主体内容大小；</li> <li><code>$http_referer</code> ：用来记录从那个页面链接访问过来的；</li> <li><code>$http_user_agent</code>： 记录客户端浏览器的相关信息；</li></ul> <h2 id="upstream模块"><a href="#upstream模块" class="header-anchor">#</a> upstream模块</h2> <p>upstream模块主要负责负载均衡的配置，通过默认的轮询调度方式来分发请求到后端服务器</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>upstream name <span class="token punctuation">{</span>
    ip_hash<span class="token punctuation">;</span>
    server <span class="token number">192.168</span>.1.100:8000<span class="token punctuation">;</span>
    server <span class="token number">192.168</span>.1.100:8001 down<span class="token punctuation">;</span>
    server <span class="token number">192.168</span>.1.100:8002 <span class="token assign-left variable">max_fails</span><span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span>
    server <span class="token number">192.168</span>.1.100:8003 <span class="token assign-left variable">fail_timeout</span><span class="token operator">=</span>20s<span class="token punctuation">;</span>
    server <span class="token number">192.168</span>.1.100:8004 <span class="token assign-left variable">max_fails</span><span class="token operator">=</span><span class="token number">3</span> <span class="token assign-left variable">fail_timeout</span><span class="token operator">=</span>20s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li><code>name</code>：指localtion块中， proxy_pass http://name 自定义设置的名字</li> <li><code>ip_hash</code>：指定请求调度算法，默认是weight权重轮询调度，可以指定</li> <li><code>server host:port</code>：分发服务器的列表配置</li> <li><code>-- down</code>：表示该主机暂停服务</li> <li><code>-- max_fails</code>：表示失败最大次数，超过失败最大次数暂停服务</li> <li><code>-- fail_timeout</code>：表示如果请求受理失败，暂停指定的时间之后重新发起请求</li></ul> <h1 id="nginx-zuul-gateway-区别"><a href="#nginx-zuul-gateway-区别" class="header-anchor">#</a> nginx zuul gateway 区别</h1> <p><a href="https://www.jianshu.com/p/8d82c6c2e5ee" target="_blank" rel="noopener noreferrer">参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：</p> <ul><li><p>nginx</p> <p>免费， 高性能，Nginx适合于服务器端负载均衡，功能更强大，因为Nginx整合一些脚本语言( Nginx + lua )</p></li> <li><p>zuul</p> <p>springCloud套件，适合微服务实现网关，采用 Ribbon + Eureka 来实现本地负载均衡.</p></li> <li><p>gateway</p> <p>gateway对比zuul多依赖了spring-webflux，在spring的支持下，功能更强大，内部实现了限流、负载均衡等，扩展性也更强，但同时也限制了仅适合于Spring Cloud套件，而zuul则可以扩展至其他微服务框架中，其内部没有实现限流、负载均衡等</p></li></ul></div></section> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/LoEnzo/LoEnzo.github.io/edit/master/blogs/Framework/Nginx.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页！</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">7/19/2021, 8:13:02 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/blogs/Framework/Mysql.html" class="prev">
            Mysql 操作手册
          </a></span> <span class="next"><a href="/blogs/Framework/Redis.html">
            Redis入门
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-2" data-v-70334359><a href="/blogs/Framework/Nginx.html#参考文档" class="sidebar-link reco-side-参考文档" data-v-70334359>参考文档</a></li><li class="level-2" data-v-70334359><a href="/blogs/Framework/Nginx.html#反向代理" class="sidebar-link reco-side-反向代理" data-v-70334359>反向代理</a></li><li class="level-2" data-v-70334359><a href="/blogs/Framework/Nginx.html#负载均衡" class="sidebar-link reco-side-负载均衡" data-v-70334359>负载均衡</a></li><li class="level-2" data-v-70334359><a href="/blogs/Framework/Nginx.html#其他优点" class="sidebar-link reco-side-其他优点" data-v-70334359>其他优点</a></li><li class="level-2" data-v-70334359><a href="/blogs/Framework/Nginx.html#配置文件基本模块说明" class="sidebar-link reco-side-配置文件基本模块说明" data-v-70334359>配置文件基本模块说明</a></li><li class="level-2" data-v-70334359><a href="/blogs/Framework/Nginx.html#main模块" class="sidebar-link reco-side-main模块" data-v-70334359>main模块</a></li><li class="level-2" data-v-70334359><a href="/blogs/Framework/Nginx.html#events模块" class="sidebar-link reco-side-events模块" data-v-70334359>events模块</a></li><li class="level-2" data-v-70334359><a href="/blogs/Framework/Nginx.html#http模块" class="sidebar-link reco-side-http模块" data-v-70334359>http模块</a></li><li class="level-2" data-v-70334359><a href="/blogs/Framework/Nginx.html#server模块" class="sidebar-link reco-side-server模块" data-v-70334359>server模块</a></li><li class="level-2" data-v-70334359><a href="/blogs/Framework/Nginx.html#location模块" class="sidebar-link reco-side-location模块" data-v-70334359>location模块</a></li><li class="level-2" data-v-70334359><a href="/blogs/Framework/Nginx.html#upstream模块" class="sidebar-link reco-side-upstream模块" data-v-70334359>upstream模块</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><!----><!----></div></div>
    <script src="/assets/js/app.8d4572e2.js" defer></script><script src="/assets/js/3.b0a99e7f.js" defer></script><script src="/assets/js/1.ec2f8a40.js" defer></script><script src="/assets/js/17.8440d99c.js" defer></script><script src="/assets/js/26.49c6337a.js" defer></script>
  </body>
</html>
